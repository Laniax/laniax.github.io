<html>
<head>
	<title>Coord viewer</title>

	<link rel="stylesheet" href="./css/style.css">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

	<script type="text/javascript" src="./js/WorldMap.js"></script>
	<script type="text/javascript" src="./js/raphael-min.js"></script>

</head>
<body>
	<div class="wrapper">
		<div class="world-map">
			<img src="./images/osrs_world_map_april_2015.png"/>
		</div>
	</div>
</body>
<footer>
<script type="text/javascript">

var world_map = new WorldMap();
var paper = Raphael(0, 0, 5952, 5376);

$(document).ready(function() {
	$.get('mesh.dat', function(d) {
	
	$(d).find('MeshSquare').each(function() {
	
		var $square = $(this);
		
		var northx = parseInt($square.attr('north-x').text());
		var northy = parseInt($square.attr('north-y').text());
		var southx = parseInt($square.attr('south-x').text());
		var southy = parseInt($square.attr('south-y').text());
		
		var north = world_map.coordsToPoint(northx, northy);
		var south = world_map.coordsToPoint(southx, southy);
		
		
		console.warn("Square at x:"+northx+" y:"+northy);
	  
		var width = south.x - north.x;
		var height = south.y - north.y;
							  //x,    y,      width, height
		var rect = paper.rect(north.x, north.y, width, height);
		
		console.warn("Square created at x:"+north.x+" y:"+north.y);
		
		// Sets the fill attribute of the circle to red (#f00)
		rect.attr("fill", "#079c00");
		rect.attr("fill-opacity", "0.2");
		// Sets the stroke attribute of the circle to white
		rect.attr("stroke", "#0cff00");
		});
	});
	
	
	var rect = paper.rect(100,100, 200, 200);
		
		// Sets the fill attribute of the circle to red (#f00)
		rect.attr("fill", "#079c00");
		rect.attr("fill-opacity", "0.2");
		// Sets the stroke attribute of the circle to white
		rect.attr("stroke", "#0cff00");
});
</script>
</footer>
</html>